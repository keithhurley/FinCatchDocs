[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "FinCatch Documentation",
    "section": "",
    "text": "Home\n\n\n\nThis is documentation for the FinCatch Data System of the Nebraska Game and Parks Fishery Division. FinCatch stores and provides analysis of standard lentic fisheries population surveys. This set of documentation is an accumulation of both developmental and instructional documentation.",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "1  System Components",
    "section": "",
    "text": "1.1 FinCatch\nFinCatch is the central website that provides data management capabilities as well as links to other components. FinCatch is written in the asp.mvc framework of .NET 6.",
    "crumbs": [
      "FinCatch System",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>System Components</span>"
    ]
  },
  {
    "objectID": "intro.html#fincatch-database",
    "href": "intro.html#fincatch-database",
    "title": "1  System Components",
    "section": "1.2 FinCatch Database",
    "text": "1.2 FinCatch Database\nThe backend database for FinCatch is built in Microsoft SQL Server.",
    "crumbs": [
      "FinCatch System",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>System Components</span>"
    ]
  },
  {
    "objectID": "intro.html#fincatchde",
    "href": "intro.html#fincatchde",
    "title": "1  System Components",
    "section": "1.3 FinCatchDE",
    "text": "1.3 FinCatchDE",
    "crumbs": [
      "FinCatch System",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>System Components</span>"
    ]
  },
  {
    "objectID": "intro.html#fincatchag",
    "href": "intro.html#fincatchag",
    "title": "1  System Components",
    "section": "1.4 FinCatchAG",
    "text": "1.4 FinCatchAG",
    "crumbs": [
      "FinCatch System",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>System Components</span>"
    ]
  },
  {
    "objectID": "intro.html#fincatchra",
    "href": "intro.html#fincatchra",
    "title": "1  System Components",
    "section": "1.5 FinCatchRA",
    "text": "1.5 FinCatchRA",
    "crumbs": [
      "FinCatch System",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>System Components</span>"
    ]
  },
  {
    "objectID": "intro.html#fincatchanalysis-r-package",
    "href": "intro.html#fincatchanalysis-r-package",
    "title": "1  System Components",
    "section": "1.6 FinCatchAnalysis R Package",
    "text": "1.6 FinCatchAnalysis R Package",
    "crumbs": [
      "FinCatch System",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>System Components</span>"
    ]
  },
  {
    "objectID": "intro.html#fincatchaccess-r-package",
    "href": "intro.html#fincatchaccess-r-package",
    "title": "1  System Components",
    "section": "1.7 FinCatchAccess R Package",
    "text": "1.7 FinCatchAccess R Package",
    "crumbs": [
      "FinCatch System",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>System Components</span>"
    ]
  },
  {
    "objectID": "intro.html#fincatchwebapi",
    "href": "intro.html#fincatchwebapi",
    "title": "1  System Components",
    "section": "1.8 FinCatchWebApi",
    "text": "1.8 FinCatchWebApi",
    "crumbs": [
      "FinCatch System",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>System Components</span>"
    ]
  },
  {
    "objectID": "FinCatch_SamplingRestrictions.html",
    "href": "FinCatch_SamplingRestrictions.html",
    "title": "2  Sampling Restrictions",
    "section": "",
    "text": "All length subsampling should occur at the SAMPLE level.\nAll weight and age subsampling may occur at the SAMPLE or SURVEY level.\nEvery individual of a species in the processed species list has either been measured or counted. If “All Species” (code 0) is in the processed species list, EVERY individual encountered during sampling was either measured or counted.\nOdd species (those not found in the processed species list) may be measured or counted and entered into FinCatch. However, they will only be reported in raw data summaries and NOT included in calculations and analysis as they cannot be assumed to have been collected in their entirety (i.e. all individuals in all samples).\nIf the “Use For CPUE” flag is FALSE (unchecked), then NONE of the data for any species in the sample will be used for catch rate calculations. If the flag is TRUE, then ALL species in the sample will be included for catch rate calculations.",
    "crumbs": [
      "FinCatch System",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Sampling Restrictions</span>"
    ]
  },
  {
    "objectID": "FinCatch_DataDesign.html",
    "href": "FinCatch_DataDesign.html",
    "title": "3  Data Design",
    "section": "",
    "text": "3.1 Processed Species\nA list of species processed during sampling is collected at the survey level and applies to all fish samples attached to the survey. Any species included in the processed species list and NOT found in the data carries the assumption of a zero-catch. If a species is found in the data and NOT in the process species list, no assumption is made that the species was consistently processed throughout the survey.\nAll species (code 0) can be included in the processed species list. The inclusion of this code carries the assumption that ALL fish collected during the survey (in ALL samples) were processed. During analysis, the processed species list will be expanded to include all species found in the data.",
    "crumbs": [
      "FinCatch System",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Data Design</span>"
    ]
  },
  {
    "objectID": "FinCatch_DataDesign.html#processed-species",
    "href": "FinCatch_DataDesign.html#processed-species",
    "title": "3  Data Design",
    "section": "",
    "text": "Note\n\n\n\nImportant caveat: expanded to include all species in the analysis and not just in the survey. This allows the following example to work: all Omaha area surveys were analyzed for red ear population structure - but redear were only found in half the reservoirs. By expanding the processed species list by analysis data rather than grouped within survey, zero’s will be included for redear in all surveys in the analysis that have all species (code 0) in the processing list.",
    "crumbs": [
      "FinCatch System",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Data Design</span>"
    ]
  },
  {
    "objectID": "FinCatch_DataDesign.html#extrapolation-of-length-subsampling",
    "href": "FinCatch_DataDesign.html#extrapolation-of-length-subsampling",
    "title": "3  Data Design",
    "section": "3.2 Extrapolation of Length Subsampling",
    "text": "3.2 Extrapolation of Length Subsampling",
    "crumbs": [
      "FinCatch System",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Data Design</span>"
    ]
  },
  {
    "objectID": "FinCatch_Architecture.html",
    "href": "FinCatch_Architecture.html",
    "title": "4  Architecture",
    "section": "",
    "text": "4.1 Packages",
    "crumbs": [
      "FinCatch System",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Architecture</span>"
    ]
  },
  {
    "objectID": "FinCatch_Architecture.html#workflow",
    "href": "FinCatch_Architecture.html#workflow",
    "title": "4  Architecture",
    "section": "4.2 WorkFlow",
    "text": "4.2 WorkFlow",
    "crumbs": [
      "FinCatch System",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Architecture</span>"
    ]
  },
  {
    "objectID": "FinCatch_Architecture.html#principles",
    "href": "FinCatch_Architecture.html#principles",
    "title": "4  Architecture",
    "section": "4.3 Principles",
    "text": "4.3 Principles\nBy Using myData Object:\n\nOnly data that’s needed is loaded\nData is cached\nData is only retrieved once for entire analysis string\n\nBy Using Separate Data Access Package:\n\nIsolates and generalizes data access\nAllows analysis code to use different sources of data\nAllows different scripts to use different authentications for data access",
    "crumbs": [
      "FinCatch System",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Architecture</span>"
    ]
  },
  {
    "objectID": "FinCatch_CreateUser.html",
    "href": "FinCatch_CreateUser.html",
    "title": "5  FinCatch Users",
    "section": "",
    "text": "5.1 Auth0 User Authentication\nFinCatch uses the Auth0 (https://www.auth0.com) for authentication and authorization. At-will, user-requested new user creation is not supported. New users can be created by a tenant admin with Auth0. Users will be sent an email to verify their address and future FinCatch usage is not possible until the verification is complete. Users should also be assigned the appropiate authorization roles.",
    "crumbs": [
      "FinCatch System",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>FinCatch Users</span>"
    ]
  },
  {
    "objectID": "FinCatch_CreateUser.html#fincatch-user",
    "href": "FinCatch_CreateUser.html#fincatch-user",
    "title": "5  FinCatch Users",
    "section": "5.2 FinCatch User",
    "text": "5.2 FinCatch User\nIn addition to Auth0 user authentication, FinCatch website, FinCatchAG, and FinCatchRA users will also need a profile in the FinCatch system. This profile is meant to decouple FinCatch from the Auth0 system in case a new authentication service needs to be implemented. Upon the first login to the FinCatch website, a new Auth0 user with a verified email will be redirected to a page to create their profile. After creation of their profile, a FinCatch DataAdmin will need to log in and “Activate” their profile.",
    "crumbs": [
      "FinCatch System",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>FinCatch Users</span>"
    ]
  },
  {
    "objectID": "FinCatch_CreateUser.html#how-to-create-a-new-user",
    "href": "FinCatch_CreateUser.html#how-to-create-a-new-user",
    "title": "5  FinCatch Users",
    "section": "5.3 How to Create A New User",
    "text": "5.3 How to Create A New User\n1) FinCatch administrator logs into Auth0 and creates new user. The appropiate roles (DataAdmin, DataWorker, DataSupervisor) should be added to the new user. The new user will need to be supplied their password.\n2) New user will receive an email with instructions on how to verify their email address. The must complete the verification process.\n3) New user should log into https://FinCatch.outdoornebraska.gov using the password supplied by the FinCatch administrator.\n4) Upon logging in, the new user will be redirected to a page to complete their FinCatch profile.\n5) A FinCatch administrator must login and activate the new user’s profile.",
    "crumbs": [
      "FinCatch System",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>FinCatch Users</span>"
    ]
  },
  {
    "objectID": "FinCatchDE_0_Deployment.html",
    "href": "FinCatchDE_0_Deployment.html",
    "title": "6  FinCatchDE Deployment",
    "section": "",
    "text": "6.1 Before Deployment\nChange:\n1.       ConnectionString in AppSettings.json\n2.       redirectUri at line 45 in previousFishSamples\n3.       redirectUri at line 164 in previousWaterSamples\n4.       auth0 settings in clsAuthFunctions, fetchController.cs, and index.tsx",
    "crumbs": [
      "FinCatchDE",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>FinCatchDE Deployment</span>"
    ]
  },
  {
    "objectID": "FinCatchDE_0_Deployment.html#deployment-steps",
    "href": "FinCatchDE_0_Deployment.html#deployment-steps",
    "title": "6  FinCatchDE Deployment",
    "section": "6.2 Deployment Steps",
    "text": "6.2 Deployment Steps\nThe application needs to be self-contained (See REF-3 and REF-4); you might want to investigate publishing the application through Visual Studio’s IIS publishing, but this is the way that has worked best for our development.\n1.       Open the Projects in Visual Studio\n2.       Ensure the application runs locally through Visual Studio\n3.       Right click the solution and select Publish...\n4.       Select the Web Server (IIS) Target\n5.       Select Web Deploy Package\n6.       Put the package location in the same folder as the project\n7.       Any name will do for the Site Name, we did Fish-Test, and click finish\n8.       Select Show All Settings\n9.       Change Deployment mode to Self-contained\n10.    Change the target runtime to the required runtime (for us that was win-x64)\n11.    Select Save\n12.    Click the Publish button\n13.    Wait for the Publish to be successful\n14.    Open the Console/Git Bash/PowerShell\n15.    Navigate to fisheries-field-sampling\\FisheriesFieldSampling\\FisheriesFieldSampling\\client-app\\ \n16.    Run npm run build\n17.    Open File Explorer\n18.    Navigate to fisheries-field-sampling\\FisheriesFieldSampling\\FisheriesFieldSampling\\client-app\\\n19.    Copy the build folder within the project\n20.    Navigate to the newly created zip file from the Publish button\n21.    Extract into a folder named publish\n22.    Navigate to publish\\Content\\D_C\\GitHub\\fish-test\\fisheries-field-sampling\\FisheriesFieldSampling\\FisheriesFieldSampling\\obj\\Release\\netcoreapp3.1\\win-x64\\PubTmp\\Out\\client-app folder\n23.    Replace the build folder with the copied build folder\n24.    Copy everything within the publish\\Content\\D_C\\GitHub\\fish-test\\fisheries-field-sampling\\FisheriesFieldSampling\\FisheriesFieldSampling\\obj\\Release\\netcoreapp3.1\\win-x64\\PubTmp\\Out\\ folder\n25.    Open Remote Desktop\n26.    Connect to the fincatchag.fishstaff.info computer\n27.    Open the file explorer on the Remote Desktop\n28.    Replace the contents of C:\\Websites\\FinCatchDE with the copied files/folders\n29.    Open the IIS Manager\n30.    Restart the FinCatchDE website",
    "crumbs": [
      "FinCatchDE",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>FinCatchDE Deployment</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_0.html",
    "href": "FinCatchAnalysis_0.html",
    "title": "7  Overview",
    "section": "",
    "text": "Overview\nThe FinCatchAnalysis (FCA) R package centralizes standard analysis functions for the FinCatch system and promotes DRY and reusable analysis code practices. The FCA package is built on top of R6 classes which provides a standard programming interface for users of the R package. Analysis functions are available for each individual analysis available and results from each analysis function returns results encapsulated in an R6 class object. All public functions in the package are prefixed with “fca_”. Package R6 objects are prefixed with “fco_”.",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Overview</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_0.html#analysis-functions",
    "href": "FinCatchAnalysis_0.html#analysis-functions",
    "title": "7  Overview",
    "section": "7.1 Analysis Functions",
    "text": "7.1 Analysis Functions\nEach analysis function in the FCA package provides a single call for an independent analysis and returns a function specific R6 object built on the base fco_ object that provides standard methods and data objects.",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Overview</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_0.html#analysis-return-objects",
    "href": "FinCatchAnalysis_0.html#analysis-return-objects",
    "title": "7  Overview",
    "section": "7.2 Analysis Return Objects",
    "text": "7.2 Analysis Return Objects",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Overview</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_DataObject.html",
    "href": "FinCatchAnalysis_DataObject.html",
    "title": "8  Data Object",
    "section": "",
    "text": "8.1 Creating FinCatch Data Objects",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Data Object</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_DataObject.html#data-caching-and-retrieval",
    "href": "FinCatchAnalysis_DataObject.html#data-caching-and-retrieval",
    "title": "8  Data Object",
    "section": "8.2 Data Caching And Retrieval",
    "text": "8.2 Data Caching And Retrieval\nData is cached in the “data_…” and “codes_…” properties of the object. Data and codes are retrieved from the data object using the “get_data_…” and “get_codes_…” functions. These “get_” functions first check for cached data in the “data_” objects and returns it; otherwise they will retrieve it from the database, cache it in the “data_” objects, and return it. The names of “get_” functions match their counterparts in the “data_” objects. The “data_” objects are exposed to users (rather than hiding them as private objects) so that advanced users can utilize the FinCatchAnalysis package and the data object by directly saving data to the cache.\n\n\n\n\n\n\nRetrieving Data\n\n\n\nData should always be retrieved using “get_” functions, so that caching works. Trying to retrieve data directly from the “data_” and “code_” cache objects opens up logic errors where lack of data and yet-to-be retrieved data are confused and confounded.\n\n\n\n\n\n\n\n\nCaution\n\n\n\nWhile data column names may be renamed and table structures combined and split during caching operations, data should not be modified in any way that introduce assumptions or potential bias. These type of operations should use “get_calc_” and “calc_” names as described below!",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Data Object</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_DataObject.html#calculated-data",
    "href": "FinCatchAnalysis_DataObject.html#calculated-data",
    "title": "8  Data Object",
    "section": "8.3 Calculated Data",
    "text": "8.3 Calculated Data\nCommonly used calculations are defined in the the data object so that they do not need to be repeated in the same analysis chain or report. One example would be length-frequency extrapolations when part of a fish sample are sub-sampled for length and then extrapolated by fish counts. These calculations are defined and retrieved in “get_calc_…” functions with their results cached in “data_…” objects similar to the “data_” and “code_” objects.",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Data Object</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_DataObject.html#warnings-and-errors",
    "href": "FinCatchAnalysis_DataObject.html#warnings-and-errors",
    "title": "8  Data Object",
    "section": "8.4 Warnings and Errors",
    "text": "8.4 Warnings and Errors\nWarning and error properties exist in the data object. These accumulate potential issues encountered when retrieving data/codes from the database or when performing calculations (such as extrapolated length-freqencies from a small subsample). These errors are printed to the console when the FinCatchAnalysis package is used interactively.\n\n\n\n\n\n\nImportant\n\n\n\nWhen the FinCatchAnalysis package is used in a non-interactive environment like markdown, quarto, or shiny, it is important that these warnings and errors are explicitly and intentionally shown to the end user as part of the output!",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Data Object</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_DataObject.html#available-data",
    "href": "FinCatchAnalysis_DataObject.html#available-data",
    "title": "8  Data Object",
    "section": "8.5 Available Data",
    "text": "8.5 Available Data",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Data Object</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_DataObject.html#available-code",
    "href": "FinCatchAnalysis_DataObject.html#available-code",
    "title": "8  Data Object",
    "section": "8.6 Available Code",
    "text": "8.6 Available Code",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Data Object</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_DataObject.html#available-calcs",
    "href": "FinCatchAnalysis_DataObject.html#available-calcs",
    "title": "8  Data Object",
    "section": "8.7 Available Calcs",
    "text": "8.7 Available Calcs",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Data Object</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_0_ExampleScript.html",
    "href": "FinCatchAnalysis_0_ExampleScript.html",
    "title": "10  Example Script",
    "section": "",
    "text": "library(FinCatchAccess)\nlibrary(FinCatchAnalysis)\n\n#use filters gadget to make a filter object\nmyFilters&lt;-fcacc_show_FilterSelector_gadget()\n\n#feed the filter object with your ID values into a data object\nmyDataObject&lt;-fc_data$new(myFilterObject=myFilters, myGroupSurveys=TRUE)\n\n#run an analysis by feeding it the data object\nmyAnalysis&lt;-fca_meanLength(myDataObject)\n\n#print output tables with printTablesAuto/Html/Latex\nmyAnalysis$printTablesAuto()\n\n#if you want canned plots\nmyAnalysis$plots\n\n#view potential data problems\nmyDataObject$warnings\nmyDataObject$errors\n\n#view analysis issues\nmyAnalysis$warnings\nmyAnalysis$errors",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Example Script</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_0_BaseObject.html",
    "href": "FinCatchAnalysis_0_BaseObject.html",
    "title": "11  Base Object",
    "section": "",
    "text": "11.1 Purpose\nProvides a common interface for results regardless of what analysis is run.",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>11</span>  <span class='chapter-title'>Base Object</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_0_BaseObject.html#purpose",
    "href": "FinCatchAnalysis_0_BaseObject.html#purpose",
    "title": "11  Base Object",
    "section": "",
    "text": "11.1.1 Variables\n\nanalysisTitle - (string) Description of the analysis stored in the object, used for headers and titles in reports and displays\nexportName - (string) Name used when generating file download names, no spaces or punctuation should be used\ndescriptionText - (string) Markdown text to be displayed in outputs prior to the output tables and figures\ntableTitle- (list&lt;string&gt;) Title text to be used on object tables, each item in list corresponds to one table output in printTables\ngroupByVars - (string) Comma-separated string of variable name to use as grouping variables within the tables\nsurveys - (dataframe) Dataframe containing survey-level data\nsamples - (dataframe) Dataframe containing samples\nresults - (list&lt;dataframes&gt;) List of dataframes containing results of analysis\nplots - (list&lt;ggplot objects&gt;) List of ggPlot objects created from analysis\nerrors - (list&lt;string&gt;) Error messages created during analysis\nwarnings- (list&lt;string&gt;) Warning messages created during analysis\ngroupHeaderBackgroundColor - (string) Color to be used in background of group header within table, groups are determined by the groupByVars variable, used in HTML outputs only\ngroupSummaryBackgroundColor - (string) Color to be used in the summary row of each group within table, groups are determined by the groupByVars variable, used in HTML outputs only\ngtTheme - (string) Name of gt tables theme from the gtExtras package, used in HTML outputs only\n\n\n\n11.1.2 Methods\n\nprint - method used by R to print the results variable\nexportJson - method used to create and save Json file of results, no default implementation\nexportCsv - method used to create and save Csv file of results, no default implementation\ncreateTable - generic table to create both Latex and Html tables for object\ncreateTableLatex - creates table formatted for Latex, default implementation simply calls and returns createTable\ncreateTableHtml - creates table formatted for Html, default implementation simply calls and returns createTable\nprintTablesLatex - called to output all tables in a LaTex format, this does not include any formatting or table specific code which is included in the createTable? functions, but instead iterates through multiple table outputs\nprintTablesHtml - called to output all tables in a Html format, this does not include any formatting or table specific code which is included in the createTable? functions, but instead iterates through multiple table outputs\nprintTablesAuto - tests the incoming call for a LaTex environment and calls either printTablesLatex or printTablesHtml as appropiate, used for markdown reports that can be user-generated in mulitple formats\niterateSurvey - a generic function that crawls through two loops, one for survey groups, one for specific tables (one analysis may output mulitiple tables) and is called by the printTable functions\nprintPlots - called to output ggplot outputs stored as part of analysis",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>11</span>  <span class='chapter-title'>Base Object</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_0_BaseObject.html#overriding-base-object",
    "href": "FinCatchAnalysis_0_BaseObject.html#overriding-base-object",
    "title": "11  Base Object",
    "section": "11.2 Overriding Base Object",
    "text": "11.2 Overriding Base Object\nThe fc_base object can be extended and customized to produce objects for specific analysis. See details in “Creating Analyis Chapter”.",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>11</span>  <span class='chapter-title'>Base Object</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_1_Objects.html",
    "href": "FinCatchAnalysis_1_Objects.html",
    "title": "12  Objects",
    "section": "",
    "text": "12.1 fc_counts Object",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>12</span>  <span class='chapter-title'>Objects</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_1_Objects.html#fc_fishsamplemedtadata",
    "href": "FinCatchAnalysis_1_Objects.html#fc_fishsamplemedtadata",
    "title": "12  Objects",
    "section": "12.2 fc_fishSampleMedtadata",
    "text": "12.2 fc_fishSampleMedtadata",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>12</span>  <span class='chapter-title'>Objects</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_1_Methods.html",
    "href": "FinCatchAnalysis_1_Methods.html",
    "title": "13  Methods",
    "section": "",
    "text": "13.1 fca_counts",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>13</span>  <span class='chapter-title'>Methods</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_1_Methods.html#fca_counts",
    "href": "FinCatchAnalysis_1_Methods.html#fca_counts",
    "title": "13  Methods",
    "section": "",
    "text": "summarizes number of fish caught in samples by species and gender\nreturns fc_counts object",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>13</span>  <span class='chapter-title'>Methods</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_1_Methods.html#fca_fishsamplemetadata",
    "href": "FinCatchAnalysis_1_Methods.html#fca_fishsamplemetadata",
    "title": "13  Methods",
    "section": "13.2 fca_fishSampleMetadata",
    "text": "13.2 fca_fishSampleMetadata\n\nreturns metadata for fish samples included in analysis\nreturns fc_fishSampleMetadata object",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>13</span>  <span class='chapter-title'>Methods</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_2_HelperFunctions.html",
    "href": "FinCatchAnalysis_2_HelperFunctions.html",
    "title": "14  Helpers",
    "section": "",
    "text": "14.1 Dplyr Verbs",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>Helpers</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_2_HelperFunctions.html#dplyr-verbs",
    "href": "FinCatchAnalysis_2_HelperFunctions.html#dplyr-verbs",
    "title": "14  Helpers",
    "section": "",
    "text": "14.1.1 AddStockCategory\nThis function works as a dplyr verb and adds a column containing a factor of stock-length categories from Gabelhouse’s 5-cell model. The function takes the name of the column containing the species code, the column containing the fish length (in mm), and a reference to the data object for the analysis (needed to retrieve species code and stock length values). The function defaults to full group names as factor labels; use abbrieviations=TRUE to use category abbrieviations instead.\nExample:\nsome_data %&gt;%\n  AddStockCategory(sppCode, fishLen, someDataObject, useAbbreviations = TRUE) \n\n\n14.1.2 AddWrParameters\nThis dplyr verb has yet to be implented\n\n\n14.1.3 AddAgeIntercept\nThis dplyr verb has yet to be implemented",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>Helpers</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_2_HelperFunctions.html#functions",
    "href": "FinCatchAnalysis_2_HelperFunctions.html#functions",
    "title": "14  Helpers",
    "section": "14.2 Functions",
    "text": "14.2 Functions\n\n14.2.1 weighted.se.mean\nThis function calculates standard error around a weighted mean. The function assumes a weighted mean calculated by the “weighted.mean()” function in the stats package of R and accepts the same arguements.\nExample:\nsome_data=data.frame(xValue=c(3,4,6,3,2,3),\n                     xWeights=c(0.2, 0.2, 0.3, 0.1, 0.1, 0.1))\nsome_data %&gt;%\n  mutate(myWeightedMean=weighted.mean(xValue, xWeights, na.rm=TRUE),\n         myWeightedMeanSE=weighted.se.mean(xValue, xWeights, na.rm=TRUE))\n\n\n14.2.2 fca_getAnalysisFunctions\nThis function returns a list and description of the analysis functions available in the FinCatchAnalysis package.\nExample:\nfca_getAnalysisFunctions()",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>Helpers</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_2_HelperFunctions.html#labelers",
    "href": "FinCatchAnalysis_2_HelperFunctions.html#labelers",
    "title": "14  Helpers",
    "section": "14.3 Labelers",
    "text": "14.3 Labelers\n\n14.3.1 fc_labeler_Survey\nThis function creates a label for each survey to be used in outputs such as reports and plots. The arguments are a vector of surveyUid values and a reference to the analysis data object. The label returned is structured like:\n\nTitle1 (WB=5110 | Method=21 | Year=2022 | Season=Spring)\n\nExample:\nsome_data %&gt;%\n  mutate(surveyLabel=fc_labeler_Survey(surveyUid, aDataObject))\n\n\n14.3.2 fc_labeler_fishSample\nThis function creates a label for each fish sample to be used in outputs such as reports and plots. The arguments are a vector of surveyUid values and a dataframe of fish samples in the analysis taken from the data object. The label returned is structured like:\n\nWB=2832 | Method=45 | 2022-03-11 | Station=627\n\nExample:\nsome_data %&gt;%\n  mutate(sampleLabel=fc_labeler_fishSample(surveyUid, aDataObject$get_data_samplesFish))\n\n\n14.3.3 fc_labeler_wqSample\nThis function creates a label for each fish sample to be used in outputs such as reports and plots. The arguments are a vector of surveyUid values and a dataframe of fish samples in the analysis taken from the data object. The label returned is structured like:\n\nWB=2832 | 2022-03-11 | Station=627\n\nExample:\nsome_data %&gt;%\n  mutate(sampleLabel=fc_labeler_wqSample(surveyUid, aDataObject$get_data_samplesWq))\n\n\n14.3.4 fc_matchCodes\nwww\n\n\n14.3.5 fc_createCodeLabel\nwww\n\n\n14.3.6 fc_createCodeLabelReversed\nwww",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>Helpers</span>"
    ]
  },
  {
    "objectID": "FinCatchAnalysis_3_CreateAnalysis.html",
    "href": "FinCatchAnalysis_3_CreateAnalysis.html",
    "title": "15  Create Analysis",
    "section": "",
    "text": "15.0.1 General\nAnalysis function calls are prefixed with “fca_” and object names are prefixed with “fc_”\nMake sure to test each analysis function for:\n\nData selected by surveys only\nData selected by samples only\nData selected by both surveys and samples\nFilters that return NO data\nSpecies in processing list and not in data\nSpecies not in processing list and in data\nWorks for both grouped by survey and ungrouped analysis, if not grouped by survey in fc_data$groupSurveys, surveyUid is set to “-1” during data download by the data object\n\n\n\n15.0.2 Flow and Critical Issues\n\nImport Data\n\nMake sure to use remove_nonCPUE_data as appropiate in get_data_ functions\n\n\n\n\n\n\nImportant\n\n\n\nuse remove_nonCPUE_data=FALSE to get all data if appropriate, specify remove_nonCPUE_data=TRUE for readability (is default if not specified)\n\n\nCheck For Empty/Missing Stations using ??? function\n\nConduct Analysis\n\nExpand to account for missing 0’s using AddZerosForMissingSpecies() function\n\nFinish Analysis\n\nLabel survey UIDs, sample UIDs, species, and methods\n\n\n\n\n\n\nNote\n\n\n\nUseful Functions:\nfc_labeler_Survey\nfc_labeler_fishSample\nfc_labeler_wqSample\nfc_matchCodes\nfc_createCodeLabel\nfc_createCodeLabelReversed\n\n\n\n\n\n\n15.0.3 Steps\n\nCreate new r file names fc_analysisName.R (Easiest To Copy Existing Analysis and Modify)\nNo library statements should be included in R file. Instead, they need to be included in the package DESCRIPTION file.\nCreate/Modify the roxygen comments for procedure\nName/Rename function. Analysis functions are prefixed with “fca_” and the same base name as the “fc_” file.\nAll function calls require a FinCatch Data Object (fc_data) to be passed to an arguement named “myData”\nCheck that fish (or Wq) samples exist in the current dataset.\nSet grouping variables.\n\n\nTo group analysis calculations during analysis, use the dplyr verbs\n\n        group_by(across(all_of(myGroups))\n\nadd addition fields as necessary “group_by(across(all_of(myGroups), anotherFieldHere)”\n\n\nWrite analysis code\n\n\nAlways include Standard Error and Sample size (if appropriate), this allow users to calculate difference confidence intervals post hoc\nWhen including confidence intervals, include 95% and 80%\nMake sure to account for missing data in any input\n\n\nLabel values like survey, sample, species, waterbody, etc.\n\n\nLabelers exist for samples and surveys (make sure surveyUid’s are set to -1 if not grouping by survey\nHelper functions are available for coded values\n\n\nIf analysis is calculated (as opposed to raw data summations), screen out species NOT in the processing list. This is necessisary because species NOT in the list do not carry the assumption that all specimans for that species were processed.\nAttach all results to an analysis object (either base or custom). Example:\n\n    #create return object at beginning of function \n    (this allows errors and warnings to be added throughout survey)\n    op &lt;- fc_meanWeight$new()\n    op$analysisTitle = \"Mean Weight (Weighted)\"\n    op$exportName = \"MeanWeight\"\n    op$descriptionText = \"These results display weighted mean \n                          weight.  Calculations are weighted as \n                          only a non-proportional (i.e. first 10 fish \n                          per 10mm length group) number of fish \n                          are subsampled.\"\n    op$tableTitle &lt;- list(\"Weighted Mean Weight\")\n    op$groupByVars &lt;- \"speciesCode\"\n    op$groupSurveys &lt;- myData$groupSurveys\n    \n    #during function, add warnings and errors to return object\n    op$errors &lt;- rlist::list.append(op$errors, \"Error1 Message\", \"Error2 Message\")\n    op$warnings &lt;- rlist::list.append(op$warnings, \"Warning1\")\n    \n    #at end of function, add results to return object\n    op$results &lt;- list(data.frame(d))\n    op$plots &lt;- myPlots\n    \n\nAdd the function to the list of analysis functions available in the package (found in inst folder). This list is used to populate the FinCatchRA UI and to feed the fc_getAvailableAnalysis function.\n\n\n\n15.0.4 Create Custom Analysis R6 Object\nAll analysis results are returned using R6 objects. This allows for consistent use and implementation of different analysis functions by parent applications and code. A base R6 object, “fc_base”, provides all the basic functions and structure for FinCatch analysis objects. Custom objects can be created in the analysis files to allow customized output tables and plots and MUST inherit from the fc_base object.\nColumn names will often need to be altered to provided user friendly text in the outputs. In addition, sometimes valuable columns are dropped for display purposes. Both of these should be done in the analysis output object createTable functions, NOT in the analysis function itself or in the “results” property of the output object. This is to provide for consistency between analyses and is important for the download function of FinCatchRA.\nEvery effort is made to ensure tables produced by analysis objects work in both HTML (which allows more formatting options and used by FinCatchRA) and in LaTex (for PDF report generation). Basic table creation should happen by providing a “CreateTable” function. Any additional work needed for specific HTML or LaTex output should be included in overridden “CreateTableHtml” or “CreateTableLatex” functions….which otherwise just call and return the “CreateTable” function by default.\nfc_counts &lt;- R6Class(\"fc_counts\",\n                    inherit = fc_base,\n                    public = list(\n                      createTable = function(mySurveyUid, myTableNumber) {\n                          #if data was selected by samples only…all surveyUids will be blank\n                      op &lt;- NA\n\n                      thisSurveyLabel &lt;- (self$results[[myTableNumber]] %&gt;%                                 filter(surveyUid == mySurveyUid) %&gt;%\n                        pull(surveyLabel))[[1]]\n                        \n                      op &lt;- self$results[[myTableNumber]] %&gt;%\n                        filter(surveyUid == mySurveyUid) %&gt;%\n                        group_by(countSpeciesLabel, sampleLabel) %&gt;%\n                        summarise(FishCount = sum(FishCount, na.rm = TRUE)) %&gt;%\n                        mutate(countGenderLabel = \"Total\") %&gt;%\n                        bind_rows(self$results[[myTableNumber]]  %&gt;%\n                        filter(surveyUid == mySurveyUid)) %&gt;%\n                        arrange(countSpeciesLabel, sampleLabel, countGenderLabel) %&gt;%\n                        select(-countSpeciesCode,-countGenderCode,-sampleUid,-surveyLabel,-surveyUid) %&gt;% \n                        spread(countGenderLabel, FishCount, fill = 0) %&gt;%\n                        relocate(\"Total\", .after = last_col()) %&gt;%\n                        gt(rowname_col = colnames(self$results[[1]])[8]) %&gt;%\n                          tab_options(\n                            row_group.background.color = self$groupHeaderBackgroundColor,\n                            summary_row.background.color = self$groupSummaryBackgroundColor\n                            ) %&gt;% \n                          tab_header(title = md(self$tableTitle),\n                                    subtitle = thisSurveyLabel) %&gt;%\n                          summary_rows(groups = TRUE,\n                                      columns = everything(),\n                                      fns = list(\"Total\" = \"sum\"),\n                                      formatter = fmt_integer,\n                                      use_seps = TRUE,\n                                      missing_text = \"\") %&gt;%\n                          self$gtTheme()\n                          \n                        return(op)\n                      }\n                    ))",
    "crumbs": [
      "Analysis R Package",
      "<span class='chapter-number'>15</span>  <span class='chapter-title'>Create Analysis</span>"
    ]
  },
  {
    "objectID": "FinCatchAccess_0.html",
    "href": "FinCatchAccess_0.html",
    "title": "Data Access R Package",
    "section": "",
    "text": "Packages",
    "crumbs": [
      "Data Access R Package"
    ]
  },
  {
    "objectID": "FinCatchAccess_0.html#workflow",
    "href": "FinCatchAccess_0.html#workflow",
    "title": "Data Access R Package",
    "section": "WorkFlow",
    "text": "WorkFlow",
    "crumbs": [
      "Data Access R Package"
    ]
  },
  {
    "objectID": "FinCatchAccess_0.html#principles",
    "href": "FinCatchAccess_0.html#principles",
    "title": "Data Access R Package",
    "section": "Principles",
    "text": "Principles\nBy Using myData Object:\n\nOnly data that’s needed is loaded\nData is cached\nData is only retrieved once for entire analysis string\n\nBy Using Separate Data Access Package:\n\nIsolates and generalizes data access\nAllows analysis code to use different sources of data\nAllows different scripts to use different authentications for data access",
    "crumbs": [
      "Data Access R Package"
    ]
  }
]